<div class="chat">
    <div class="chat-partner-info d-flex">
    
        <img src=<%=asset_path(url_for(them.profile.attached_img))%>>
        <p><%=them.name %></p>
        <div class="<%=them_status%>" data-user-id="<%=@them.id%>"></div>
    </div>

    <div class="private-chat d-flex flex-column"  data-chat-id="<%=@chat.id%>">
        <% @messages.each do |msg|%>

            <%add_styling = (msg.user.id == me.id)? "me": "them"%>

            <div class="message p-2 my-2 <%=add_styling%>">
                <div class="text">
                    <div class="meta-info d-flex">
                        <p class="name"><%=msg.user.name%></p>
                        <p class="datetime"><%=msg.datetime%></p>
                    </div>
                    <p class="msg"><%=msg.message%></p>
                </div>
            </div>
        <%end%>
    </div>

    <%# should disable send button if friendship not found. you can no longer communicate with someone whos not ur friend %>
    <%=form_with(model: @message, local: false, class: "message-form d-flex mt-2") do |form|%>
        <%=form.text_field :message, autocomplete: "off", class: "message-field" %>
        <%=form.hidden_field :messageable_id, value: @chat.id%>
        <%=form.hidden_field :messageable_type, value: "Chat"%>

        <%=form.submit "Send", disabled: disable_submit%>
    <%end%>
</div>

